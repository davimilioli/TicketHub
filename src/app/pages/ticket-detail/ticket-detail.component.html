<div class="modal" *ngIf="showModalExclude">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Tem certeza quer deseja excluir?</h2>
        </div>
        <div class="modal-actions">
            <button class="btn secondary" (click)="modalExclude()">Não</button>
            <button class="btn" (click)="deleteTicket()">Sim</button>
        </div>
    </div>
</div>
<div class="modal" *ngIf="showModalEdit">
    <div class="modal-content edit" *ngIf="ticket">
        <div class="modal-header">
            <h2>Editar ticket</h2>
        </div>
        <app-form-ticket (onSubmit)="editTicket($event)" [ticketFormData]="ticket" [btnText]="btnText"></app-form-ticket>
    </div>
</div>
<section class="detail" *ngIf="ticket">
    <div class="detail-description">
        <div class="detail-description-header">
            <h1>#{{ ticket.id }} {{ ticket.titulo }}</h1>
            <div class="detail-description-actions">
                <button class="btn secondary" (click)="modalExclude()">
                    <fa-icon [icon]="faTrash"></fa-icon>
                </button>
                <button class="btn secondary" (click)="modalEdit()">
                    <fa-icon [icon]="faPen"></fa-icon>
                </button>
            </div>

        </div>
        <div class="detail-description-list">
            <div class="detail-description-item">
                <span>Solicitado por</span>
                <p>{{ ticket.solicitante }}</p>
            </div>
            <div class="detail-description-item">
                <span>Prioridade</span>
                <p>{{ ticket.prioridade }}</p>
            </div>
            <div class="detail-description-item">
                <span>Status</span>
                <p>{{ ticket.status }}</p>
            </div>
            <div class="detail-description-item">
                <span>Criado em</span>
                <p>{{ ticket.criado_em | date: 'dd/MM/yyyy' }}</p>
            </div>
            <div class="detail-description-item">
                <span>Prazo</span>
                <p>{{ ticket.prazo_de | date: 'dd/MM/yyyy' }} até {{ ticket.prazo_ate | date: 'dd/MM/yyyy' }}</p>
            </div>
        </div>
        <div class="detail-description-ticket">
            <span>Descrição</span>
            <p>{{ ticket.descricao }}</p>
        </div>
    </div>

    <div class="detail-log-interactions">
        <div class="detail-log-form">
            <div class="detail-log-title">
                <h2>Interações</h2>
            </div>
            <div class="form-content">
                <form (ngSubmit)="submit()" [formGroup]="ticketLogForm" #formDir="ngForm">
                    <div class="form-group">
                        <label for="tipo">Tipo de interação</label>
                        <select name="tipo" id="tipo" (change)="interaction($event)" formControlName="tipo">
                            <option *ngFor="let type of typeInteraction" [value]="type" >{{ type }}</option>
                        </select>
                    </div>
                    <div class="form-group" *ngIf="showUser">
                        <label for="para">Usuário</label>
                        <select name="para" id="para" formControlName="para">
                            <option *ngFor="let type of typeInteraction" [value]="type">{{ type }}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="descricao">Descrição</label>
                        <textarea name="descricao" id="descricao" rows="10" formControlName="descricao"></textarea>
                    </div>
                    <button type="submit" class="btn">Enviar</button>
                </form>
            </div>
        </div>
        <div class="detail-log">
            <div class="detail-log-title">
                <h2>Histórico</h2>
            </div>
            <div class="detail-log-list" *ngIf="ticket.historico">
                <div class="detail-log-item" *ngFor="let log of ticket.historico">
                    <div class="detail-log-info">
                        <div class="detail-log-info-item">
                            <span>Usuário</span>
                            <p>{{ log.usuario }}</p>
                        </div>
                        <div class="detail-log-info-item">
                            <span>Interação</span>
                            <p>{{ log.tipo }}</p>
                        </div>
                        <div class="detail-log-info-item">
                            <span>Inserido em</span>
                            <p>{{ log.criado_em | date: 'dd/MM/yyyy' }}</p>
                        </div>
                    </div>
                    <div class="detail-log-description">
                        <p>{{ log.descricao }}</p>
                    </div>
                </div>

            </div>

        </div>
    </div>


</section>